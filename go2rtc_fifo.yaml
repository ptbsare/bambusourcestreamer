# go2rtc 配置文件 - 使用 FIFO 方案（单连接模式）
# 位置: /config/.config/BambuStudio/cameratools/go2rtc_fifo.yaml
#
# 使用方法:
#   1. 先启动 FIFO feeder: ./bambu_fifo_feeder.sh &
#   2. 再启动 go2rtc: ./go2rtc -config go2rtc_fifo.yaml
#
# 优点:
#   - 只有一个 bambu_source 连接到打印机
#   - 多个客户端可以同时观看
#   - 自动重连机制
preload:
  bambu: "video=h264"
streams:
  bambu:
    # 从 FIFO 读取 H.264 视频流
    # ffmpeg 会持续从 FIFO 读取数据并重新打包
    - ffmpeg:/tmp/bambu_video.fifo#video=h264

# API 服务器配置
api:
  listen: ":1984"

# RTSP 服务器配置
rtsp:
  listen: ":8554"

# WebRTC 配置
webrtc:
  listen: ":8555"

# 日志配置
log:
  level: info
  format: text